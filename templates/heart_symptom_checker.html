<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Symptom Checker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* DARK THEME CSS */
        body { font-family: 'Inter', sans-serif; background-color: #000000; color: #D1D5DB; min-height: 100vh; position: relative; }
        .form-select { appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none'%3e%3cpath d='M7 7l3-3 3 3m0 6l-3 3-3-3' stroke='%23D1D5DB' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 0.5rem center; background-size: 1.5em 1.5em; padding-right: 2.5rem; }
        .fixed-header { position: sticky; top: 0; z-index: 20; background-color: rgba(0, 0, 0, 0.9); backdrop-filter: blur(4px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        #gif-background { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; object-fit: cover; object-position: center; overflow: hidden; filter: brightness(0.6) contrast(1.1) grayscale(0.1); }
        .container { position: relative; z-index: 10; }
        #assessment-container { background-color: rgba(17, 24, 39, 0.95); }
    </style>
</head>
<body class="antialiased bg-black text-gray-300">

    <img src="/static/record.gif" id="gif-background" alt="Animated Abstract Background">
    
    <div class="container mx-auto p-4 md:p-8 max-w-3xl">
        
        <header class="text-center mb-10 fixed-header p-4 -mx-4 -mt-4">
            <a href="{{ url_for('dashboard') }}" class="text-red-400 hover:text-red-300 text-sm font-medium mb-4 block">&larr; Back to Dashboard</a>
            <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">Emergency Symptom Checker</h1>
            <p class="text-md text-gray-400 max-w-2xl mx-auto">Answer these questions about your current symptoms to determine the urgency of seeking medical care.</p>
        </header>
        
        <div class="h-28 sm:h-32"></div>

        <main id="assessment-container" class="p-6 md:p-8 rounded-2xl shadow-2xl border border-gray-700">
            <form id="heart-symptom-form" method="POST" action="{{ url_for('heart_symptom_checker') }}">
                
                <h2 class="text-2xl font-semibold mb-6 text-red-400 border-b border-gray-700 pb-2">Current Symptoms</h2>
                
                <div class="grid grid-cols-1 gap-6 mb-8">
                    <!-- The 7 original symptom questions -->
                    <div>
                        <label for="Crushing" class="block text-sm font-medium text-gray-300 mb-1">Do you feel a "Crushing" or "extreme pressure"?</label>
                        <select id="Crushing" name="Crushing" class="form-select w-full p-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-red-400" required>
                            <option value="">Select...</option><option value="Yes">Yes</option><option value="No" selected>No</option>
                        </select>
                    </div>
                    <div>
                        <label for="Pressure" class="block text-sm font-medium text-gray-300 mb-1">Do you feel general "Pressure" or "Heaviness"?</label>
                        <select id="Pressure" name="Pressure" class="form-select w-full p-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-red-400" required>
                            <option value="">Select...</option><option value="Yes">Yes</option><option value="No" selected>No</option>
                        </select>
                    </div>
                    <div>
                        <label for="Squeezing" class="block text-sm font-medium text-gray-300 mb-1">Do you feel a "Squeezing/Tightening" sensation in your chest?</label>
                        <select id="Squeezing" name="Squeezing" class="form-select w-full p-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-red-400" required>
                            <option value="">Select...</option><option value="Yes">Yes</option><option value="No" selected>No</option>
                        </select>
                    </div>
                    <div>
                        <label for="Duration" class="block text-sm font-medium text-gray-300 mb-1">How long has the main discomfort lasted?</label>
                        <select id="Duration" name="Duration" class="form-select w-full p-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-red-400" required>
                            <option value="">Select...</option><option value="5-10min">5-10 minutes (Brief)</option><option value="20-25min">20-25 minutes (Moderate)</option><option value="More">More than 30 minutes (Prolonged)</option>
                        </select>
                    </div>
                    <div>
                        <label for="Spreading of Pain (One Side)" class="block text-sm font-medium text-gray-300 mb-1">Is the discomfort spreading to your "left arm/jaw/back"?</label>
                        <select id="Spreading of Pain (One Side)" name="Spreading of Pain (One Side)" class="form-select w-full p-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-red-400" required>
                            <option value="">Select...</option><option value="Yes">Yes</option><option value="No" selected>No</option>
                        </select>
                    </div>
                    <div>
                        <label for="Relief" class="block text-sm font-medium text-gray-300 mb-1">Does the pain "get better" by resting or changing position?</label>
                        <select id="Relief" name="Relief" class="form-select w-full p-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-red-400" required>
                            <option value="">Select...</option><option value="Yes">Yes, it is relieved/gets better</option><option value="No" selected>No, it is NOT relieved</option>
                        </select>
                    </div>
                    <div>
                        <label for="Vomiting" class="block text-sm font-medium text-gray-300 mb-1">Are you currently experiencing Nausea or "Vomiting"?</label>
                        <select id="Vomiting" name="Vomiting" class="form-select w-full p-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-red-400" required>
                            <option value="">Select...</option><option value="Yes">Yes</option><option value="No" selected>No</option>
                        </select>
                    </div>
                </div>

                <div class="mt-8 text-center">
                    <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition duration-200 focus:outline-none focus:ring-4 focus:ring-red-500 focus:ring-opacity-50 w-full md:w-auto">
                        Get Urgent Assessment
                    </button>
                </div>
            </form>
            <br>
            
            <div class="flex justify-center mt-6">
                <a href="https://www.red.health/" class="bg-red-600 hover:bg-red-700 text-white text-lg font-semibold py-3 px-8 rounded-md shadow-md transition duration-200 ease-in-out inline-block">
                Call Ambulance
                </a>
            </div>
            
            <section id="results-dashboard" class="mt-12">
                {% if result_html %}
                    <div id="result-panel" class="p-6 md:p-8 rounded-2xl shadow-xl border border-gray-600 bg-gray-800/50">
                        <h3 class="text-3xl font-bold text-center mb-6 text-red-400">Assessment Result</h3>
                        <div id="prediction-output" class="text-center">
                            <p class="text-2xl mt-2 text-white">{{ result_html | safe }}</p>
                            {% if disclaimer_html %}
                            <p class="mt-4 text-gray-400 text-sm italic">{{ disclaimer_html | safe }}</p>
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
            </section>
            
            <div class="text-center mt-6 text-xl font-bold text-gray-400">Take care of your body. It's the only place you have to live.</div>
        </main>
    </div>
</body>
</html>
